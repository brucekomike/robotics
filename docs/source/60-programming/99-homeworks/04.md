# 第四次作业

设计一个机械臂的运动轨迹，要求使用摆线速度来控制末端位置、速度和加速度。插补周期为10毫秒，最大速度为1000毫米/秒。

## 求解流程

### 计算步骤

1. **定义参数**：
   - 连杆长度：$ l_1 = 0.3 \, \text{m} $，$ l_2 = 0.65 \, \text{m} $
   - 距离和高度：$ S = b = 0.4 \, \text{m} $，$ H = 0.6 \, \text{m} $
   - 最大速度：$ v_{\text{max}} = 1000 \, \text{mm/s} $
   - 插补周期：$ \Delta t = 0.01 \, \text{s} $

2. **生成摆线速度曲线**：
   - 使用摆线公式生成速度：$ v(t) = r \cdot (1 - \cos(2 \pi t / T)) $
   - 计算位置轨迹：通过对速度进行数值积分得到位置 $ x(t) $

3. **求解反向运动学**：
   - 对每个时间点计算关节角度：
     - 第二关节角度：$\theta_2 = \text{atan2}(\sqrt{1 - D^2}, D)$
     - 第一个关节角度：$\theta_1 = \text{atan2}(y, x) - \text{atan2}(l_2 \cdot \sin(\theta_2), l_1 + l_2 \cdot \cos(\theta_2))$

4. **计算速度和加速度**：
   - 使用差分法计算速度 $ v_x, v_y $ 和加速度 $ a_x, a_y $
### 结果演示

1. **绘制轨迹**：
   - 显示机械臂末端的轨迹、速度和加速度曲线。

2. **关节角度变化**：
   - 绘制关节角度随时间变化的图像。

通过以上步骤，可以实现机械臂的平滑运动，并展示其位置、速度和加速度的变化。
## matlab/octave
````{tab} 轨迹一
```{literalinclude} ../../../../src/sim/trajectory.m
:language: matlab
```
````
````{tab} 轨迹二
```{literalinclude} ../../../../src/sim/trajectory2.m
:language: matlab
```
````
````{tab} 轨迹三
```{literalinclude} ../../../../src/sim/trajectory3.m
:language: matlab
```
````